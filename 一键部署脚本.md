# 🚀 一键部署到 Cloudflare（最稳定的方法）

## ⚡ 使用 Wrangler CLI 部署（推荐）

### 为什么这个方法最好？
- ✅ 不需要上传 zip
- ✅ 自动构建
- ✅ 立即看到错误
- ✅ 一次配置，永久使用

---

## 📋 完整步骤（5分钟）

### 步骤 1：构建项目（2分钟）

在项目目录打开 PowerShell：

```powershell
cd d:\cursorproject\fiverr

# 安装依赖（如果还没安装）
npm install

# 构建项目
npm run pages:build
```

**等待构建完成，看到 "✨ Compiled successfully" 就好了。**

---

### 步骤 2：登录 Cloudflare（1分钟）

```powershell
npx wrangler login
```

这会打开浏览器，点击 **Allow** 授权。

---

### 步骤 3：部署（1分钟）

```powershell
npx wrangler pages deploy .vercel/output/static --project-name=fiverr-da8
```

**部署完成后会显示您的网站 URL！**

```
✨ Success! Uploaded 0 files (X already uploaded)
✨ Deployment complete! Take a peek over at https://xxxxxxxx.fiverr-da8.pages.dev
```

---

### 步骤 4：配置数据库绑定（2分钟）

#### 4.1 创建数据库（如果还没创建）

```powershell
# 创建数据库
npx wrangler d1 create fiverr-articles

# 初始化表结构
npx wrangler d1 execute fiverr-articles --file=./db/schema.sql --remote
```

#### 4.2 在 Cloudflare Dashboard 绑定

1. https://dash.cloudflare.com
2. Workers & Pages → fiverr-da8
3. Settings → Functions
4. D1 database bindings → Add binding
   ```
   Variable name: DB
   D1 database: fiverr-articles
   ```
5. Save

#### 4.3 重新部署

```powershell
npx wrangler pages deploy .vercel/output/static --project-name=fiverr-da8
```

---

## ✅ 完成！

访问您的网站：
```
https://fiverr-da8.pages.dev
```

应该能正常访问了！

---

## 🔧 如果遇到错误

### 错误 1: "wrangler: command not found"

**解决：**
```powershell
npm install -g wrangler
# 或使用
npx wrangler login
```

### 错误 2: 构建失败

**查看错误信息：**
```powershell
npm run pages:build
```

如果看到错误，复制告诉我。

### 错误 3: "Project not found"

**项目名称可能不对，查看现有项目：**
```powershell
npx wrangler pages project list
```

使用正确的项目名称。

---

## 📊 命令总结

```powershell
# 完整流程（复制粘贴即可）

# 1. 进入项目目录
cd d:\cursorproject\fiverr

# 2. 安装依赖
npm install

# 3. 构建项目
npm run pages:build

# 4. 登录 Cloudflare
npx wrangler login

# 5. 创建并初始化数据库
npx wrangler d1 create fiverr-articles
npx wrangler d1 execute fiverr-articles --file=./db/schema.sql --remote

# 6. 部署
npx wrangler pages deploy .vercel/output/static --project-name=fiverr-da8

# 7. 然后在 Dashboard 绑定数据库
# 8. 再次部署
npx wrangler pages deploy .vercel/output/static --project-name=fiverr-da8
```

---

## 💡 以后更新网站

每次修改代码后，只需运行：

```powershell
npm run pages:build
npx wrangler pages deploy .vercel/output/static --project-name=fiverr-da8
```

**就这么简单！** 🎉

