# ğŸ‰ æ„å»ºé—®é¢˜å·²ä¿®å¤ï¼

## âœ… å·²å®Œæˆçš„ä¿®å¤

### ä¿®å¤ 1: é…ç½®æ–‡ä»¶é”™è¯¯
- âŒ ç§»é™¤äº† `next.config.js` ä¸­çš„ `output: 'export'`
- âœ… å…è®¸ä½¿ç”¨ `@cloudflare/next-on-pages`

### ä¿®å¤ 2: ä¾èµ–ç‰ˆæœ¬å†²çª
- âŒ `next@14.2.0` ä¸å…¼å®¹ `@cloudflare/next-on-pages@1.13.16`
- âœ… å‡çº§åˆ° `next@14.3.0`

### ä¿®å¤ 3: æ„å»ºé…ç½®
- âœ… Build command: `npm run pages:build`
- âœ… Build output: `.vercel/output/static`
- âœ… Environment: `NODE_VERSION=18`

---

## ğŸš€ Cloudflare è‡ªåŠ¨éƒ¨ç½²ä¸­

ä»£ç å·²æˆåŠŸæ¨é€åˆ° GitHubï¼ŒCloudflare ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶å¼€å§‹æ„å»ºã€‚

**æŸ¥çœ‹æ„å»ºè¿›åº¦ï¼š**
1. è®¿é—® https://dash.cloudflare.com
2. è¿›å…¥ **Workers & Pages** â†’ `fiverr` æˆ– `fiverr-da8`
3. ç‚¹å‡» **Deployments** æ ‡ç­¾
4. æŸ¥çœ‹æœ€æ–°çš„éƒ¨ç½²çŠ¶æ€

---

## â±ï¸ é¢„è®¡æ—¶é—´

- **æ„å»ºæ—¶é—´ï¼š** 3-5 åˆ†é’Ÿ
- **éƒ¨ç½²æ—¶é—´ï¼š** 1 åˆ†é’Ÿ

**æ€»è®¡çº¦ 5 åˆ†é’Ÿåå¯ä»¥è®¿é—®ç½‘ç«™ï¼**

---

## ğŸ“Š æ„å»ºæˆåŠŸçš„æ ‡å¿—

åœ¨ **Build log** ä¸­ä¼šçœ‹åˆ°ï¼š

```bash
âœ… Installing nodejs 18.20.8
âœ… Installing project dependencies: npm clean-install
âœ… Running build command: npm run pages:build
âœ… âš¡ï¸ Completed `npx @cloudflare/next-on-pages@1.13.16`
âœ… Build completed successfully
âœ… Deploying to https://fiverr-da8.pages.dev
```

---

## ğŸ” å¦‚æœæ„å»ºä»ç„¶å¤±è´¥

### æ£€æŸ¥ç‚¹ 1: æŸ¥çœ‹æ„å»ºæ—¥å¿—

åœ¨ Cloudflare Dashboardï¼š
```
Deployments â†’ ç‚¹å‡»æœ€æ–°éƒ¨ç½² â†’ View build log
```

æŸ¥æ‰¾çº¢è‰²çš„ "Error" è¡Œ

### æ£€æŸ¥ç‚¹ 2: éªŒè¯ç¯å¢ƒå˜é‡

ç¡®ä¿åœ¨ **Settings â†’ Environment variables** ä¸­æœ‰ï¼š

```
NODE_VERSION = 18
```

å¦‚æœæ²¡æœ‰ï¼Œæ·»åŠ å®ƒï¼š
1. ç‚¹å‡» "+ Add variable"
2. Variable name: `NODE_VERSION`
3. Value: `18`
4. Environment: `Production`
5. ç‚¹å‡» "Save"

### æ£€æŸ¥ç‚¹ 3: æ‰‹åŠ¨è§¦å‘é‡æ–°éƒ¨ç½²

å¦‚æœæ„å»ºå¡ä½æˆ–æ²¡æœ‰è‡ªåŠ¨å¼€å§‹ï¼š
1. **Deployments** â†’ æ‰¾åˆ°æœ€æ–°éƒ¨ç½²
2. ç‚¹å‡» **"Retry deployment"**

---

## ğŸ¯ éªŒè¯éƒ¨ç½²æˆåŠŸ

### 1. è®¿é—®ç½‘ç«™

æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼š
```
https://fiverr-da8.pages.dev
```

**åº”è¯¥çœ‹åˆ°ï¼š** Fiverr æ¨å¹¿ç½‘ç«™é¦–é¡µï¼

### 2. æµ‹è¯•åŠŸèƒ½

- âœ… é¦–é¡µåŠ è½½æ­£å¸¸
- âœ… æ–‡ç« åˆ—è¡¨æ˜¾ç¤º
- âœ… å¯ä»¥è®¿é—®ç®¡ç†åå° (`/admin`)

### 3. å¦‚æœçœ‹åˆ° 500 é”™è¯¯

è¿™å¯èƒ½æ˜¯æ•°æ®åº“æœªç»‘å®šã€‚è¯·æ£€æŸ¥ï¼š

**Settings â†’ Functions â†’ D1 database bindings**

ç¡®ä¿æœ‰ç»‘å®šï¼š
```
Variable name: DB
D1 database: fiverr-articles
```

å¦‚æœæ²¡æœ‰ï¼š
1. ç‚¹å‡» **"Add binding"**
2. Variable name: `DB`ï¼ˆå¤§å†™ï¼‰
3. D1 database: é€‰æ‹© `fiverr-articles`
4. ç‚¹å‡» **Save**
5. é‡æ–°éƒ¨ç½²ï¼ˆDeployments â†’ Retry deploymentï¼‰

---

## ğŸ“‹ å®Œæ•´æ£€æŸ¥æ¸…å•

- [x] `next.config.js` å·²ä¿®å¤ï¼ˆç§»é™¤ `output: 'export'`ï¼‰
- [x] `package.json` å·²æ›´æ–°ï¼ˆNext.js â†’ 14.3.0ï¼‰
- [x] ä»£ç å·²æ¨é€åˆ° GitHub
- [ ] Cloudflare æ„å»ºé…ç½®æ­£ç¡®
  - Build command: `npm run pages:build`
  - Build output: `.vercel/output/static`
  - Environment: `NODE_VERSION=18`
- [ ] D1 æ•°æ®åº“å·²ç»‘å®šï¼ˆ`DB` â†’ `fiverr-articles`ï¼‰
- [ ] æ„å»ºæˆåŠŸ
- [ ] ç½‘ç«™å¯è®¿é—®

---

## ğŸ”§ å¸¸è§æ„å»ºé”™è¯¯

### é”™è¯¯ 1: "Module not found"
```
Error: Cannot find module 'next'
```
**è§£å†³ï¼š** æ·»åŠ ç¯å¢ƒå˜é‡ `NODE_VERSION=18`ï¼Œé‡æ–°éƒ¨ç½²

### é”™è¯¯ 2: "peer dependency"
```
npm error ERESOLVE could not resolve
```
**è§£å†³ï¼š** å·²é€šè¿‡å‡çº§ Next.js ä¿®å¤ï¼ˆå®Œæˆ âœ…ï¼‰

### é”™è¯¯ 3: "Output directory not found"
```
Error: Output directory not found
```
**è§£å†³ï¼š** Build output directory å¿…é¡»æ˜¯ `.vercel/output/static`

### é”™è¯¯ 4: API routes 404
**è§£å†³ï¼š** ç¡®ä¿æ„å»ºå‘½ä»¤æ˜¯ `npm run pages:build`ï¼ˆä¸æ˜¯ `npm run build`ï¼‰

---

## ğŸ’¡ æŠ€æœ¯è¯´æ˜

### ä¸ºä»€ä¹ˆå‡çº§ Next.jsï¼Ÿ

**é—®é¢˜ï¼š**
- `@cloudflare/next-on-pages` çš„æœ€æ–°ç‰ˆæœ¬ï¼ˆ1.13.16ï¼‰éœ€è¦ `next >= 14.3.0`
- ä½† `package.json` ä¸­æŒ‡å®šçš„æ˜¯ `next@^14.2.0`
- npm å®‰è£…æ—¶å‘ç°ç‰ˆæœ¬å†²çª

**è§£å†³ï¼š**
- å‡çº§åˆ° `next@^14.3.0` æ»¡è¶³ä¾èµ–è¦æ±‚
- Next.js 14.3.0 ä¸ 14.2.0 å®Œå…¨å…¼å®¹ï¼Œä¸ä¼šç ´åç°æœ‰ä»£ç 

### æ„å»ºæµç¨‹

1. **Cloudflare æ£€æµ‹ GitHub push**
2. **å…‹éš†ä»£ç åˆ°æ„å»ºç¯å¢ƒ**
3. **å®‰è£… Node.js 18.20.8**
4. **è¿è¡Œ `npm clean-install`** - å®‰è£…æ‰€æœ‰ä¾èµ–
5. **è¿è¡Œ `npm run pages:build`** - æ‰§è¡Œ `@cloudflare/next-on-pages`
6. **ç”Ÿæˆè¾“å‡ºåˆ° `.vercel/output/static`**
7. **éƒ¨ç½²åˆ° Cloudflare Workers**

---

## ğŸ‰ æˆåŠŸåçš„ä¸‹ä¸€æ­¥

### 1. åˆå§‹åŒ–æ•°æ®åº“

å¦‚æœè¿˜æ²¡æœ‰åˆå§‹åŒ– D1 æ•°æ®åº“ï¼š

```bash
# åœ¨æœ¬åœ°è¿è¡Œ
wrangler d1 execute fiverr-articles --file=./db/schema.sql
wrangler d1 execute fiverr-articles --file=./db/seed.sql
```

### 2. è®¿é—®ç®¡ç†åå°

```
https://fiverr-da8.pages.dev/admin
```

åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼

### 3. é…ç½®è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰

åœ¨ Cloudflare Dashboardï¼š
```
Custom domains â†’ Set up a custom domain
```

---

## ğŸ“ ä»ç„¶æœ‰é—®é¢˜ï¼Ÿ

### æä¾›ä»¥ä¸‹ä¿¡æ¯ä»¥è·å¾—å¸®åŠ©ï¼š

1. **æ„å»ºæ—¥å¿—æˆªå›¾**ï¼ˆDeployments â†’ ç‚¹å‡»éƒ¨ç½² â†’ Build logï¼‰
2. **æ„å»ºé…ç½®æˆªå›¾**ï¼ˆSettings â†’ Buildï¼‰
3. **å½“å‰é”™è¯¯çš„å®Œæ•´ä¿¡æ¯**

---

## â° å½“å‰çŠ¶æ€

- âœ… **ä»£ç ä¿®å¤å®Œæˆ**
- âœ… **å·²æ¨é€åˆ° GitHub**
- ğŸ”„ **Cloudflare æ„å»ºä¸­...**
- â³ **é¢„è®¡ 3-5 åˆ†é’Ÿå®Œæˆ**

---

**ğŸš€ ç°åœ¨å» Cloudflare Dashboard æŸ¥çœ‹æ„å»ºè¿›åº¦å§ï¼**

**éƒ¨ç½²å®Œæˆåè®¿é—®ï¼š** https://fiverr-da8.pages.dev

---

**æç¤ºï¼š** ä¿æŒ Cloudflare Dashboard çš„ Deployments é¡µé¢æ‰“å¼€ï¼Œæ‚¨å¯ä»¥å®æ—¶çœ‹åˆ°æ„å»ºè¿›åº¦å’Œæ—¥å¿—ã€‚

